<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:ArchiDesignPatterns.Mobile.ViewModels"
             x:Class="ArchiDesignPatterns.Mobile.Pages.DesignPatterns.VisitorPatternPage"
             x:DataType="viewmodels:VisitorPatternViewModel"
             Title="Visitor">
    <Grid RowDefinitions="Auto,*">
        <!-- Header -->
        <Border Grid.Row="0"
                BackgroundColor="{StaticResource BehavioralPattern}"
                Padding="20,24,20,20"
                StrokeThickness="0">
            <VerticalStackLayout Spacing="8">
                <HorizontalStackLayout Spacing="12">
                    <Label Text="ðŸ‘ï¸" FontSize="32" VerticalOptions="Center" />
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Visitor Pattern"
                               FontSize="28" FontAttributes="Bold"
                               TextColor="White" />
                        <Border BackgroundColor="White" Opacity="0.3"
                                Padding="8,4" StrokeThickness="0"
                                StrokeShape="RoundRectangle 6"
                                HorizontalOptions="Start">
                            <Label Text="Behavioral" FontSize="11"
                                   FontAttributes="Bold" TextColor="White" />
                        </Border>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </VerticalStackLayout>
        </Border>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Style="{StaticResource PatternDetailContainer}">
                <!-- Description Card -->
                <Border Style="{StaticResource ElevatedCard}">
                    <VerticalStackLayout Spacing="12">
                        <Label Text="ðŸ“‹ Description" Style="{StaticResource SubTitle}" />
                        <BoxView Style="{StaticResource Divider}" Margin="0,0" />
                        <Label Text="Le pattern Visitor permet de sÃ©parer un algorithme de la structure de l'objet sur lequel il opÃ¨re."
                               Style="{StaticResource BodyLarge}" LineBreakMode="WordWrap" />
                    </VerticalStackLayout>
                </Border>

                <!-- Interactive Example -->
                <Border Style="{StaticResource InteractiveSection}">
                    <VerticalStackLayout Spacing="16">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="ðŸŽ®" FontSize="20" VerticalOptions="Center" />
                            <Label Text="Interactive Example"
                                   Style="{StaticResource SubTitle}"
                                   TextColor="{StaticResource Primary}"
                                   VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <BoxView Style="{StaticResource Divider}" Margin="0,0" />
                        <Label Text="Accepter le Visitor sur un Ã©lÃ©ment :"
                               Style="{StaticResource BodyMedium}" />
                        <Button Text="Accepter le Visitor" Clicked="OnAcceptVisitorClicked" HorizontalOptions="Fill" />
                        <Label x:Name="ResultLabel" Style="{StaticResource ResultLabel}" LineBreakMode="WordWrap" />
                    </VerticalStackLayout>
                </Border>

                <!-- Code Example -->
                <Border Style="{StaticResource CodeSection}">
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="ðŸ’»" FontSize="20" />
                            <Label Text="Code Example" Style="{StaticResource SubTitle}" />
                        </HorizontalStackLayout>
                        <BoxView Style="{StaticResource Divider}" Margin="0,0" />
                        <Editor Style="{StaticResource CodeEditor}"
                                Text="public interface IVisitor { string Visit(Element e); }\npublic class Element { public string Accept(IVisitor v) => v.Visit(this); }\npublic class ConcreteVisitor : IVisitor { public string Visit(Element e) => 'VisitÃ©'; }" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
